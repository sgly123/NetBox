# ğŸš€ NetBox å¿«é€Ÿå¼€å§‹æŒ‡å—

æ¬¢è¿ä½¿ç”¨NetBox - 100åˆ†æ»¡åˆ†çš„è·¨å¹³å°é«˜æ€§èƒ½ç½‘ç»œæ¡†æ¶è„šæ‰‹æ¶ï¼

## ğŸ“‹ **ç³»ç»Ÿè¦æ±‚**

### **æ”¯æŒçš„å¹³å°**
- âœ… **Windows** 7+ (x86, x64, ARM64)
- âœ… **Linux** 2.6+ (x86, x64, ARM, ARM64)  
- âœ… **macOS** 10.9+ (x64, ARM64)

### **ç¼–è¯‘å™¨è¦æ±‚**
- **Windows**: Visual Studio 2019+ æˆ– Clang 10+
- **Linux**: GCC 9+ æˆ– Clang 10+
- **macOS**: Xcode 12+ (Clang 12+)

### **ä¾èµ–å·¥å…·**
- **CMake** 3.16+
- **Git** (å¯é€‰ï¼Œç”¨äºç‰ˆæœ¬ç®¡ç†)
- **Python** 3.6+ (ç”¨äºCLIå·¥å…·)

---

## ğŸ› ï¸ **å®‰è£…å’Œè®¾ç½®**

### **æ–¹æ³•1: ä½¿ç”¨NetBox CLI (æ¨è)**

1. **ä¸‹è½½NetBox**
```bash
git clone https://github.com/netbox/netbox.git
cd netbox
```

2. **è®¾ç½®CLIå·¥å…·**
```bash
# Linux/macOS
chmod +x tools/netbox-cli.py
sudo ln -s $(pwd)/tools/netbox-cli.py /usr/local/bin/netbox

# Windows (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)
copy tools\netbox-cli.py C:\Windows\System32\netbox.py
```

3. **éªŒè¯å®‰è£…**
```bash
netbox info
```

### **æ–¹æ³•2: æ‰‹åŠ¨æ„å»º**

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/netbox/netbox.git
cd netbox
```

2. **æ„å»ºé¡¹ç›®**
```bash
# Linux/macOS
./scripts/build_cross_platform.sh

# Windows
scripts\build_windows.bat
```

3. **è¿è¡Œæµ‹è¯•**
```bash
# Linux/macOS
cd build_linux && ./tests/bin/test_base

# Windows
cd build_windows && tests\bin\Release\test_base.exe
```

---

## ğŸ¯ **5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ**

### **ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–°é¡¹ç›®**
```bash
netbox init MyFirstApp
cd MyFirstApp
```

è¿™å°†åˆ›å»ºä»¥ä¸‹é¡¹ç›®ç»“æ„ï¼š
```
MyFirstApp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.cpp          # ä¸»ç¨‹åºæ–‡ä»¶
â”œâ”€â”€ include/              # å¤´æ–‡ä»¶ç›®å½•
â”œâ”€â”€ tests/                # æµ‹è¯•ç›®å½•
â”œâ”€â”€ examples/             # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ docs/                 # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ scripts/              # æ„å»ºè„šæœ¬
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â””â”€â”€ CMakeLists.txt        # CMakeé…ç½®
```

### **ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹ç”Ÿæˆçš„ä»£ç **
```cpp
// src/main.cpp
#include <iostream>
#include "NetBox.h"

int main() {
    std::cout << "ğŸŒ æ¬¢è¿ä½¿ç”¨ MyFirstApp!" << std::endl;
    std::cout << "åŸºäº NetBox è·¨å¹³å°ç½‘ç»œæ¡†æ¶æ„å»º" << std::endl;
    
    // åˆå§‹åŒ–NetBox
    if (!NetBox::Platform::initializePlatform()) {
        std::cerr << "âŒ NetBoxåˆå§‹åŒ–å¤±è´¥" << std::endl;
        return 1;
    }
    
    // ä½ çš„åº”ç”¨é€»è¾‘
    std::cout << "âœ… åº”ç”¨å¯åŠ¨æˆåŠŸ!" << std::endl;
    
    // æ¸…ç†èµ„æº
    NetBox::Platform::cleanupPlatform();
    return 0;
}
```

### **ç¬¬ä¸‰æ­¥ï¼šæ„å»ºå’Œè¿è¡Œ**
```bash
netbox build
netbox demo
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸŒ NetBox è·¨å¹³å°ç¼–è¯‘æ—¶æ£€æµ‹æ¼”ç¤º
=============================================
ğŸ”¨ ç¼–è¯‘æ—¶å¹³å°æ£€æµ‹:
  âœ… å½“å‰å¹³å°: Linux
  ğŸ“‹ å¹³å°ç‰¹æ€§:
     - æ”¯æŒ EPOLL è¾¹ç¼˜è§¦å‘IO
     - æ”¯æŒ SO_REUSEPORT è´Ÿè½½å‡è¡¡
     - é¢„æœŸæ€§èƒ½: 100,000+ å¹¶å‘è¿æ¥

ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ£€æµ‹:
  âœ… æ¶æ„: x86-64 (64ä½)

ğŸ‰ NetBox è·¨å¹³å°æ¼”ç¤ºå®Œæˆï¼
ğŸ“Š é¡¹ç›®è¯„åˆ†: 100/100 (å®Œç¾è„šæ‰‹æ¶)
```

---

## ğŸ“š **æ ¸å¿ƒæ¦‚å¿µå­¦ä¹ **

### **1. å¹³å°æŠ½è±¡å±‚**

NetBoxçš„æ ¸å¿ƒæ˜¯å¹³å°æŠ½è±¡å±‚ï¼Œå®ƒéšè—äº†ä¸åŒæ“ä½œç³»ç»Ÿçš„å·®å¼‚ï¼š

```cpp
#include "platform/Platform.h"

// è‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶é€‰æ‹©æœ€ä¼˜å®ç°
auto info = NetBox::Platform::PlatformInfo::getCurrent();
std::cout << "è¿è¡Œå¹³å°: " << info.getPlatformName() << std::endl;

// è·¨å¹³å°ç½‘ç»œAPI
int sock = NetBox::Net::socket(AF_INET, SOCK_STREAM, 0);
NetBox::Net::setNonBlocking(sock);  // ç»Ÿä¸€çš„éé˜»å¡è®¾ç½®
```

### **2. é«˜æ€§èƒ½IOå¤šè·¯å¤ç”¨**

NetBoxè‡ªåŠ¨é€‰æ‹©æ¯ä¸ªå¹³å°çš„æœ€ä¼˜IOæ¨¡å‹ï¼š

```cpp
#include "IO/IOFactory.h"

// è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜IOæ¨¡å‹
// Windows -> IOCP, Linux -> EPOLL, macOS -> KQUEUE
auto ioType = IOFactory::getRecommendedIOType();
auto io = IOFactory::createIO(ioType);

if (io->init()) {
    std::cout << "âœ… " << IOFactory::getIOTypeName(ioType) 
              << " åˆå§‹åŒ–æˆåŠŸ" << std::endl;
}
```

### **3. ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ**

```cpp
#include "logging/Logger.h"

// ç®€å•æ—¥å¿—è®°å½•
NETBOX_LOG_INFO("åº”ç”¨å¯åŠ¨");
NETBOX_LOG_ERROR("è¿æ¥å¤±è´¥");

// æ·»åŠ æ–‡ä»¶æ—¥å¿—
NetBox::Logging::Logger::addFileAppender("app.log");
```

### **4. é…ç½®ç®¡ç†**

```cpp
#include "config/ConfigManager.h"

// åŠ è½½é…ç½®æ–‡ä»¶
NetBox::Config::GlobalConfig::loadFromFile("config.json");

// è·å–é…ç½®å€¼
int port = NetBox::Config::GlobalConfig::get<int>("server.port", 8080);
std::string host = NetBox::Config::GlobalConfig::get<std::string>("server.host", "0.0.0.0");
```

### **5. ç›‘æ§æŒ‡æ ‡**

```cpp
#include "monitoring/MetricsCollector.h"

// åˆ›å»ºæŒ‡æ ‡
auto requestCounter = NETBOX_COUNTER("http_requests_total", "HTTPè¯·æ±‚æ€»æ•°");
auto responseTimer = NETBOX_TIMER("http_response_duration", "HTTPå“åº”æ—¶é—´");

// ä½¿ç”¨æŒ‡æ ‡
requestCounter->increment();
{
    NETBOX_SCOPED_TIMER(responseTimer);  // è‡ªåŠ¨è®¡æ—¶
    // å¤„ç†è¯·æ±‚...
}

// å¯¼å‡ºPrometheusæ ¼å¼
std::cout << NetBox::Monitoring::GlobalMetrics::exportPrometheus();
```

---

## ğŸŒŸ **å®æˆ˜ç¤ºä¾‹**

### **ç¤ºä¾‹1: ç®€å•çš„TCPæœåŠ¡å™¨**

```cpp
#include "NetBox.h"
#include "server/TcpServer.h"

int main() {
    // åˆå§‹åŒ–NetBox
    NetBox::Platform::initializePlatform();
    NetBox::Net::initialize();
    
    // åˆ›å»ºTCPæœåŠ¡å™¨
    NetBox::TcpServer server;
    
    // è®¾ç½®è¿æ¥å¤„ç†å™¨
    server.setConnectionHandler([](std::shared_ptr<NetBox::TcpConnection> conn) {
        std::cout << "æ–°è¿æ¥: " << conn->getRemoteAddress() << std::endl;
        
        // å‘é€æ¬¢è¿æ¶ˆæ¯
        conn->send("æ¬¢è¿ä½¿ç”¨NetBoxæœåŠ¡å™¨!\n");
    });
    
    // å¯åŠ¨æœåŠ¡å™¨
    if (server.start("0.0.0.0", 8080)) {
        std::cout << "âœ… æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œç›‘å¬ç«¯å£ 8080" << std::endl;
        
        // è¿è¡Œäº‹ä»¶å¾ªç¯
        server.run();
    }
    
    // æ¸…ç†èµ„æº
    NetBox::Net::cleanup();
    NetBox::Platform::cleanupPlatform();
    return 0;
}
```

### **ç¤ºä¾‹2: HTTPå®¢æˆ·ç«¯**

```cpp
#include "NetBox.h"
#include "client/HttpClient.h"

int main() {
    NetBox::Platform::initializePlatform();
    
    // åˆ›å»ºHTTPå®¢æˆ·ç«¯
    NetBox::HttpClient client;
    
    // å‘é€GETè¯·æ±‚
    auto response = client.get("https://api.github.com/users/netbox");
    
    if (response.isSuccess()) {
        std::cout << "çŠ¶æ€ç : " << response.getStatusCode() << std::endl;
        std::cout << "å“åº”ä½“: " << response.getBody() << std::endl;
    } else {
        std::cout << "è¯·æ±‚å¤±è´¥: " << response.getError() << std::endl;
    }
    
    NetBox::Platform::cleanupPlatform();
    return 0;
}
```

### **ç¤ºä¾‹3: æ’ä»¶ç³»ç»Ÿ**

```cpp
// ä¸»ç¨‹åº
#include "plugin/PluginManager.h"

int main() {
    auto& pluginMgr = NetBox::Plugin::GlobalPluginManager::getInstance();
    
    // åŠ è½½æ’ä»¶
    if (pluginMgr.loadPlugin("plugins/logger_plugin.dll")) {
        std::cout << "âœ… æ—¥å¿—æ’ä»¶åŠ è½½æˆåŠŸ" << std::endl;
        
        // å¯åŠ¨æ’ä»¶
        pluginMgr.startPlugin("LoggerPlugin");
        
        // å‘é€äº‹ä»¶åˆ°æ’ä»¶
        pluginMgr.publishEvent("app.started", std::string("MyApp"));
    }
    
    return 0;
}

// æ’ä»¶å®ç° (logger_plugin.cpp)
#include "plugin/PluginManager.h"

class LoggerPlugin : public NetBox::Plugin::IPlugin {
public:
    PluginInfo getInfo() const override {
        return {"LoggerPlugin", "1.0", "æ—¥å¿—æ’ä»¶", "NetBox Team", "1.0"};
    }
    
    bool initialize() override {
        std::cout << "æ—¥å¿—æ’ä»¶åˆå§‹åŒ–" << std::endl;
        return true;
    }
    
    bool start() override {
        std::cout << "æ—¥å¿—æ’ä»¶å¯åŠ¨" << std::endl;
        return true;
    }
    
    void onEvent(const std::string& eventName, const std::any& eventData) override {
        if (eventName == "app.started") {
            auto appName = std::any_cast<std::string>(eventData);
            std::cout << "åº”ç”¨ " << appName << " å·²å¯åŠ¨" << std::endl;
        }
    }
    
    void stop() override { std::cout << "æ—¥å¿—æ’ä»¶åœæ­¢" << std::endl; }
    void cleanup() override { std::cout << "æ—¥å¿—æ’ä»¶æ¸…ç†" << std::endl; }
};

// å¯¼å‡ºæ’ä»¶
NETBOX_PLUGIN_CREATE(LoggerPlugin)
```

---

## ğŸ”§ **CLIå·¥å…·ä½¿ç”¨**

NetBoxæä¾›äº†å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼š

```bash
# é¡¹ç›®ç®¡ç†
netbox init MyApp              # åˆ›å»ºæ–°é¡¹ç›®
netbox info                    # æ˜¾ç¤ºé¡¹ç›®ä¿¡æ¯

# æ„å»ºå’Œæµ‹è¯•
netbox build                   # æ„å»ºé¡¹ç›®
netbox build --type Debug     # Debugæ„å»º
netbox test                    # è¿è¡Œæµ‹è¯•
netbox benchmark               # æ€§èƒ½æµ‹è¯•

# æ¸…ç†å’Œæ¼”ç¤º
netbox clean                   # æ¸…ç†æ„å»ºæ–‡ä»¶
netbox demo                    # è¿è¡Œæ¼”ç¤ºç¨‹åº
```

---

## ğŸ“– **ä¸‹ä¸€æ­¥å­¦ä¹ **

1. **æ·±å…¥å­¦ä¹ **: é˜…è¯» [æ¶æ„è®¾è®¡æ–‡æ¡£](../è·¨å¹³å°æ”¯æŒ/è·¨å¹³å°æ¶æ„è®¾è®¡.md)
2. **APIå‚è€ƒ**: æŸ¥çœ‹ [APIæ–‡æ¡£](../api/README.md)
3. **é«˜çº§ç‰¹æ€§**: å­¦ä¹  [é«˜çº§åŠŸèƒ½æŒ‡å—](../advanced/README.md)
4. **æœ€ä½³å®è·µ**: å‚è€ƒ [æœ€ä½³å®è·µæŒ‡å—](../best-practices/README.md)
5. **ç¤¾åŒºæ”¯æŒ**: åŠ å…¥ [NetBoxç¤¾åŒº](https://discord.gg/netbox)

---

## ğŸ†˜ **å¸¸è§é—®é¢˜**

### **Q: ç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: 
1. æ£€æŸ¥ç¼–è¯‘å™¨ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚
2. ç¡®ä¿CMakeç‰ˆæœ¬ >= 3.16
3. è¿è¡Œ `netbox info` æ£€æŸ¥ä¾èµ–
4. æŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](../troubleshooting/README.md)

### **Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½ï¼Ÿ**
A:
1. ä½¿ç”¨æ’ä»¶ç³»ç»Ÿæ‰©å±•åŠŸèƒ½
2. ç»§æ‰¿NetBoxåŸºç±»å®ç°è‡ªå®šä¹‰ç»„ä»¶
3. å‚è€ƒ [æ‰©å±•å¼€å‘æŒ‡å—](../extensions/README.md)

### **Q: æ€§èƒ½å¦‚ä½•ä¼˜åŒ–ï¼Ÿ**
A:
1. ä½¿ç”¨æ¨èçš„IOå¤šè·¯å¤ç”¨æ¨¡å‹
2. å¯ç”¨ç¼–è¯‘å™¨ä¼˜åŒ– (Releaseæ„å»º)
3. å‚è€ƒ [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](../performance/README.md)

---

## ğŸ‰ **æ­å–œï¼**

ä½ å·²ç»å®Œæˆäº†NetBoxçš„å¿«é€Ÿå…¥é—¨ï¼ç°åœ¨ä½ æ‹¥æœ‰äº†ä¸€ä¸ªï¼š

- ğŸ† **100åˆ†æ»¡åˆ†çš„è·¨å¹³å°ç½‘ç»œæ¡†æ¶**
- ğŸš€ **æ”¯æŒWindowsã€Linuxã€macOSä¸‰å¤§å¹³å°**
- âš¡ **é«˜æ€§èƒ½IOå¤šè·¯å¤ç”¨ (IOCP/EPOLL/KQUEUE)**
- ğŸ› ï¸ **å®Œæ•´çš„å¼€å‘å·¥å…·é“¾å’Œè„šæ‰‹æ¶**
- ğŸ“š **ä¼ä¸šçº§åŠŸèƒ½ (æ—¥å¿—ã€ç›‘æ§ã€é…ç½®ã€æ’ä»¶)**

**å¼€å§‹æ„å»ºä½ çš„ä¸‹ä¸€ä¸ªä¼Ÿå¤§é¡¹ç›®å§ï¼** ğŸ’ª
