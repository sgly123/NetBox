# NetBox æ’ä»¶ç›®å½•

## ğŸ“ ç›®å½•ç»“æ„

```
plugins/
â”œâ”€â”€ README.md                    # æ’ä»¶ç›®å½•è¯´æ˜
â”œâ”€â”€ echo/                        # EchoæœåŠ¡å™¨æ’ä»¶
â”‚   â””â”€â”€ EchoServerPlugin.cpp     # Echoæ’ä»¶æ³¨å†Œå®ç°
â”œâ”€â”€ sanguosha/                   # ä¸‰å›½æ€æœåŠ¡å™¨æ’ä»¶ï¼ˆæœªæ¥å®ç°ï¼‰
â”‚   â””â”€â”€ SanguoshaPlugin.cpp      # ä¸‰å›½æ€æ’ä»¶æ³¨å†Œæ¨¡æ¿
â””â”€â”€ redis/                       # Mini RedisæœåŠ¡å™¨æ’ä»¶ï¼ˆæœªæ¥å®ç°ï¼‰
    â””â”€â”€ RedisPlugin.cpp          # Redisæ’ä»¶æ³¨å†Œæ¨¡æ¿
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### **èŒè´£åˆ†ç¦»**
- **ä¸šåŠ¡é€»è¾‘**: æ”¾åœ¨ `app/` ç›®å½•ï¼Œä¸“æ³¨äºåŠŸèƒ½å®ç°
- **æ’ä»¶æ³¨å†Œ**: æ”¾åœ¨ `plugins/` ç›®å½•ï¼Œä¸“æ³¨äºæ¡†æ¶é›†æˆ
- **æ¡†æ¶æ ¸å¿ƒ**: æ”¾åœ¨ `NetFramework/` ç›®å½•ï¼Œæä¾›åŸºç¡€è®¾æ–½

### **ç›®å½•ç»„ç»‡**
- æ¯ä¸ªåº”ç”¨ç±»å‹æœ‰ç‹¬ç«‹çš„æ’ä»¶ç›®å½•
- æ’ä»¶ç›®å½•åä¸é…ç½®æ–‡ä»¶ä¸­çš„ `application.type` å¯¹åº”
- ä¾¿äºç®¡ç†å’Œæ‰©å±•æ–°çš„åº”ç”¨ç±»å‹

## ğŸš€ æ·»åŠ æ–°æ’ä»¶çš„æ­¥éª¤

### 1. åˆ›å»ºæ’ä»¶ç›®å½•
```bash
mkdir plugins/your_app
```

### 2. åˆ›å»ºæ’ä»¶æ³¨å†Œæ–‡ä»¶
```cpp
// plugins/your_app/YourAppPlugin.cpp
#include "app/ApplicationRegistry.h"
#include "YourAppServer.h"
#include "base/Logger.h"

static bool registerYourAppServer() {
    Logger::info("æ­£åœ¨æ³¨å†ŒYourAppServeræ’ä»¶...");
    
    bool success = ApplicationRegistry::getInstance().registerApplication("your_app", 
        [](const std::string& ip, int port, IOMultiplexer::IOType io_type, IThreadPool* pool) {
            return std::make_unique<YourAppServer>(ip, port, io_type, pool);
        });
    
    return success;
}

static bool g_yourAppServerRegistered = registerYourAppServer();
```

### 3. æ›´æ–°CMakeLists.txt
```cmake
# åº”ç”¨æ’ä»¶
app/src/EchoServerPlugin.cpp
plugins/echo/EchoServerPlugin.cpp
plugins/your_app/YourAppPlugin.cpp  # æ·»åŠ æ–°æ’ä»¶
```

### 4. åˆ›å»ºé…ç½®æ–‡ä»¶
```yaml
# config_your_app.yaml
application:
  type: your_app
network:
  ip: 127.0.0.1
  port: 8888
```

### 5. æµ‹è¯•æ’ä»¶
```bash
./NetBox config_your_app.yaml
```

## ğŸ“‹ å½“å‰æ’ä»¶çŠ¶æ€

| æ’ä»¶åç§° | çŠ¶æ€ | é…ç½®ç±»å‹ | ç«¯å£ | æè¿° |
|---------|------|----------|------|------|
| **echo** | âœ… å·²å®ç° | `echo` | 8888 | TCPå›æ˜¾æœåŠ¡ |
| **sanguosha** | ğŸš§ æ¨¡æ¿å°±ç»ª | `sanguosha` | 8888 | ä¸‰å›½æ€æ¸¸æˆæœåŠ¡å™¨ |
| **mini_redis** | ğŸš§ æ¨¡æ¿å°±ç»ª | `mini_redis` | 6379 | Redisæ•°æ®åº“æœåŠ¡ |

## ğŸ¯ æ’ä»¶å¼€å‘è§„èŒƒ

### **å‘½åè§„èŒƒ**
- æ’ä»¶ç›®å½•: å°å†™å­—æ¯ + ä¸‹åˆ’çº¿ (å¦‚: `mini_redis`)
- æ’ä»¶æ–‡ä»¶: å¤§é©¼å³° + Plugin.cpp (å¦‚: `MiniRedisPlugin.cpp`)
- æ³¨å†Œå‡½æ•°: `register` + ç±»å (å¦‚: `registerMiniRedisServer`)

### **ä»£ç è§„èŒƒ**
- åŒ…å«è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
- æä¾›æ’ä»¶ä¿¡æ¯å‡½æ•°
- ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼
- éµå¾ªé”™è¯¯å¤„ç†è§„èŒƒ

### **é…ç½®è§„èŒƒ**
- é…ç½®ç±»å‹ä¸æ’ä»¶ç›®å½•åä¸€è‡´
- æ”¯æŒåº”ç”¨ç‰¹å®šçš„é…ç½®èŠ‚
- æä¾›åˆç†çš„é»˜è®¤å€¼
- åŒ…å«é…ç½®ç¤ºä¾‹å’Œè¯´æ˜

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### **æ·»åŠ æ–°æ’ä»¶æ—¶**
1. åœ¨å¯¹åº”ç›®å½•åˆ›å»ºæ’ä»¶æ–‡ä»¶
2. æ›´æ–° CMakeLists.txt
3. åˆ›å»ºé…ç½®æ–‡ä»¶æ¨¡æ¿
4. æ›´æ–°æ­¤ README æ–‡æ¡£

### **åˆ é™¤æ’ä»¶æ—¶**
1. åˆ é™¤æ’ä»¶ç›®å½•
2. æ›´æ–° CMakeLists.txt
3. åˆ é™¤ç›¸å…³é…ç½®æ–‡ä»¶
4. æ›´æ–°æ­¤ README æ–‡æ¡£

### **ä¿®æ”¹æ’ä»¶æ—¶**
1. ä¿æŒæ¥å£å…¼å®¹æ€§
2. æ›´æ–°ç›¸å…³æ–‡æ¡£
3. æµ‹è¯•æ‰€æœ‰é…ç½®ç»„åˆ
4. ç¡®ä¿å‘ä¸‹å…¼å®¹

## ğŸ‰ æ’ä»¶åŒ–çš„ä¼˜åŠ¿

- âœ… **æ¨¡å—åŒ–**: æ¯ä¸ªåº”ç”¨ç‹¬ç«‹å¼€å‘å’Œç»´æŠ¤
- âœ… **å¯æ‰©å±•**: è½»æ¾æ·»åŠ æ–°çš„åº”ç”¨ç±»å‹
- âœ… **é…ç½®é©±åŠ¨**: æ— éœ€é‡ç¼–è¯‘å³å¯åˆ‡æ¢åº”ç”¨
- âœ… **èŒè´£åˆ†ç¦»**: ä¸šåŠ¡é€»è¾‘ä¸æ¡†æ¶é›†æˆåˆ†ç¦»
- âœ… **æ˜“äºæµ‹è¯•**: æ¯ä¸ªæ’ä»¶å¯ç‹¬ç«‹æµ‹è¯•
- âœ… **å›¢é˜Ÿåä½œ**: ä¸åŒå›¢é˜Ÿå¯å¹¶è¡Œå¼€å‘ä¸åŒæ’ä»¶
